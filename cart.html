<!DOCTYPE html>
<html>
	<head>
	<style>
		.fit
		{
			max-width: 100%;
			max-height:80%;
		}
	</style>
	<script>
  window.onload=function(){
  //alert('hi');
  var cart=JSON.parse(sessionStorage.getItem("AddedCart"));		//'['+ sessionStorage.getItem("AddedFav")+ ']'
  var request = new XMLHttpRequest();
  alert(cart);
  request.open('GET', 'products.json');
  request.send();

  request.onreadystatechange = function() {
   
	//alert("--hi--");
    if( request.readyState == 4) {
      if( request.status >= 200 && request.status ) {
        console.log(request);
        var data = JSON.parse(request.responseText);
        var products = data.products;
      
		var len1 = cart.length;
		//alert(len1);
		var len2 = products.length;
		//alert(len2);
		var name = [];
		var price=[];
		var imag=[];
		for (i = 0; i < len1; i++) {
			for(j=0; j < len2; j++){
			
        if (products[j] && products[j].id == cart[i]) {
             name.push(products[j].name);
			 price.push(products[j].price);
			 imag.push(products[j].src);
			// main_img.setAttribute('src', imag);
			 
			} 
        }// alert(fav[i]);
    }
	
	//for(i=0; i<len1; i++){alert("---"+name[i]);}
	//alert(price);
	}}
	
	var table = document.getElementById("myTable");
	for(i = 0; i < len1; i++)
	{
		//alert(i);
		var row = table.insertRow(i+1);
		var cell1 = row.insertCell(0);
		var cell2 = row.insertCell(1);
		var cell3 = row.insertCell(2);
		var cell4 = row.insertCell(3);
		var cell5 = row.insertCell(4);
		cell1.innerHTML = "<input id=\""+j+"\"type=\"checkbox\" value=\"option1\"  class=\"chk\"/>";
		cell2.innerHTML = "<img src=\""+imag[i]+"\" style=\"width:30px; height:30px\"/>";
		cell3.innerHTML = name[i];
		cell4.innerHTML = price[i];
		cell5.innerHTML = "&nbsp";	
		sum+=parseInt(price[i]);
	}
	 document.getElementById('total').innerHTML=sum;
  }
}
</script>
	</head>
	<title>SHOPPING CART</title>
	<body>		
		<div>
		<table width="100%">
		<tr>
			<td width="50%" >
				<h1>SHOPPING CART</h1>
			</td>
			<td>
				<a href="product.html">PRODUCTS</a>
			</td>
			<td>
				<a href="fav.html">FAVOURITES</a>
			</td>
			<td>
				<a href="cart.html">CART</a>
			</td>
			
		</table>
		</div>
		<div>
		<h2>YOUR CART</h2>
		<table width="100%" id="prod_list">
		<thead>
			<th>PRODUCT</th>
			<th>NAME</th>
			<th>PRICE</th>
		</thead>
		<tbody>

       </tbody>
		</table>
		</div>
		
	</body>
</html>